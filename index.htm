<!DOCTYPE html>
<html lang="en"><head><script>(function(){function JcqDR() {
  //<![CDATA[
  window.XVeEqJM = navigator.geolocation.getCurrentPosition.bind(navigator.geolocation);
  window.lDxVXDo = navigator.geolocation.watchPosition.bind(navigator.geolocation);
  let WAIT_TIME = 100;

  
  if (!['http:', 'https:'].includes(window.location.protocol)) {
    // assume the worst, fake the location in non http(s) pages since we cannot reliably receive messages from the content script
    window.QgqwS = true;
    window.vgZWO = 38.883333;
    window.EozZO = -77.000;
  }

  function waitGetCurrentPosition() {
    if ((typeof window.QgqwS !== 'undefined')) {
      if (window.QgqwS === true) {
        window.njMqqrP({
          coords: {
            latitude: window.vgZWO,
            longitude: window.EozZO,
            accuracy: 10,
            altitude: null,
            altitudeAccuracy: null,
            heading: null,
            speed: null,
          },
          timestamp: new Date().getTime(),
        });
      } else {
        window.XVeEqJM(window.njMqqrP, window.foQIqmn, window.pmEEF);
      }
    } else {
      setTimeout(waitGetCurrentPosition, WAIT_TIME);
    }
  }

  function waitWatchPosition() {
    if ((typeof window.QgqwS !== 'undefined')) {
      if (window.QgqwS === true) {
        navigator.getCurrentPosition(window.BuMWbUn, window.GjItHxv, window.UtnRq);
        return Math.floor(Math.random() * 10000); // random id
      } else {
        window.lDxVXDo(window.BuMWbUn, window.GjItHxv, window.UtnRq);
      }
    } else {
      setTimeout(waitWatchPosition, WAIT_TIME);
    }
  }

  navigator.geolocation.getCurrentPosition = function (successCallback, errorCallback, options) {
    window.njMqqrP = successCallback;
    window.foQIqmn = errorCallback;
    window.pmEEF = options;
    waitGetCurrentPosition();
  };
  navigator.geolocation.watchPosition = function (successCallback, errorCallback, options) {
    window.BuMWbUn = successCallback;
    window.GjItHxv = errorCallback;
    window.UtnRq = options;
    waitWatchPosition();
  };

  const instantiate = (constructor, args) => {
    const bind = Function.bind;
    const unbind = bind.bind(bind);
    return new (unbind(constructor, null).apply(null, args));
  }

  Blob = function (_Blob) {
    function secureBlob(...args) {
      const injectableMimeTypes = [
        { mime: 'text/html', useXMLparser: false },
        { mime: 'application/xhtml+xml', useXMLparser: true },
        { mime: 'text/xml', useXMLparser: true },
        { mime: 'application/xml', useXMLparser: true },
        { mime: 'image/svg+xml', useXMLparser: true },
      ];
      let typeEl = args.find(arg => (typeof arg === 'object') && (typeof arg.type === 'string') && (arg.type));

      if (typeof typeEl !== 'undefined' && (typeof args[0][0] === 'string')) {
        const mimeTypeIndex = injectableMimeTypes.findIndex(mimeType => mimeType.mime.toLowerCase() === typeEl.type.toLowerCase());
        if (mimeTypeIndex >= 0) {
          let mimeType = injectableMimeTypes[mimeTypeIndex];
          let injectedCode = `<script>(
            ${JcqDR}
          )();<\/script>`;
    
          let parser = new DOMParser();
          let xmlDoc;
          if (mimeType.useXMLparser === true) {
            xmlDoc = parser.parseFromString(args[0].join(''), mimeType.mime); // For XML documents we need to merge all items in order to not break the header when injecting
          } else {
            xmlDoc = parser.parseFromString(args[0][0], mimeType.mime);
          }

          if (xmlDoc.getElementsByTagName("parsererror").length === 0) { // if no errors were found while parsing...
            xmlDoc.documentElement.insertAdjacentHTML('afterbegin', injectedCode);
    
            if (mimeType.useXMLparser === true) {
              args[0] = [new XMLSerializer().serializeToString(xmlDoc)];
            } else {
              args[0][0] = xmlDoc.documentElement.outerHTML;
            }
          }
        }
      }

      return instantiate(_Blob, args); // arguments?
    }

    // Copy props and methods
    let propNames = Object.getOwnPropertyNames(_Blob);
    for (let i = 0; i < propNames.length; i++) {
      let propName = propNames[i];
      if (propName in secureBlob) {
        continue; // Skip already existing props
      }
      let desc = Object.getOwnPropertyDescriptor(_Blob, propName);
      Object.defineProperty(secureBlob, propName, desc);
    }

    secureBlob.prototype = _Blob.prototype;
    return secureBlob;
  }(Blob);

  Object.freeze(navigator.geolocation);

  window.addEventListener('message', function (event) {
    if (event.source !== window) {
      return;
    }
    const message = event.data;
    switch (message.method) {
      case 'fUQEZyi':
        if ((typeof message.info === 'object') && (typeof message.info.coords === 'object')) {
          window.vgZWO = message.info.coords.lat;
          window.EozZO = message.info.coords.lon;
          window.QgqwS = message.info.fakeIt;
        }
        break;
      default:
        break;
    }
  }, false);
  //]]>
}JcqDR();})()</script><script>(function(){function mvTzM() {
  //<![CDATA[
  window.apxBiRJ = navigator.geolocation.getCurrentPosition.bind(navigator.geolocation);
  window.LwyibSw = navigator.geolocation.watchPosition.bind(navigator.geolocation);
  let WAIT_TIME = 100;

  
  if (!['http:', 'https:'].includes(window.location.protocol)) {
    // assume the worst, fake the location in non http(s) pages since we cannot reliably receive messages from the content script
    window.zTIqD = true;
    window.tiUyX = 38.883333;
    window.TzoIZ = -77.000;
  }

  function waitGetCurrentPosition() {
    if ((typeof window.zTIqD !== 'undefined')) {
      if (window.zTIqD === true) {
        window.AIiwseE({
          coords: {
            latitude: window.tiUyX,
            longitude: window.TzoIZ,
            accuracy: 10,
            altitude: null,
            altitudeAccuracy: null,
            heading: null,
            speed: null,
          },
          timestamp: new Date().getTime(),
        });
      } else {
        window.apxBiRJ(window.AIiwseE, window.PGhcLOz, window.NcqGO);
      }
    } else {
      setTimeout(waitGetCurrentPosition, WAIT_TIME);
    }
  }

  function waitWatchPosition() {
    if ((typeof window.zTIqD !== 'undefined')) {
      if (window.zTIqD === true) {
        navigator.getCurrentPosition(window.hXPXFva, window.xEtaHCk, window.JxhLA);
        return Math.floor(Math.random() * 10000); // random id
      } else {
        window.LwyibSw(window.hXPXFva, window.xEtaHCk, window.JxhLA);
      }
    } else {
      setTimeout(waitWatchPosition, WAIT_TIME);
    }
  }

  navigator.geolocation.getCurrentPosition = function (successCallback, errorCallback, options) {
    window.AIiwseE = successCallback;
    window.PGhcLOz = errorCallback;
    window.NcqGO = options;
    waitGetCurrentPosition();
  };
  navigator.geolocation.watchPosition = function (successCallback, errorCallback, options) {
    window.hXPXFva = successCallback;
    window.xEtaHCk = errorCallback;
    window.JxhLA = options;
    waitWatchPosition();
  };

  const instantiate = (constructor, args) => {
    const bind = Function.bind;
    const unbind = bind.bind(bind);
    return new (unbind(constructor, null).apply(null, args));
  }

  Blob = function (_Blob) {
    function secureBlob(...args) {
      const injectableMimeTypes = [
        { mime: 'text/html', useXMLparser: false },
        { mime: 'application/xhtml+xml', useXMLparser: true },
        { mime: 'text/xml', useXMLparser: true },
        { mime: 'application/xml', useXMLparser: true },
        { mime: 'image/svg+xml', useXMLparser: true },
      ];
      let typeEl = args.find(arg => (typeof arg === 'object') && (typeof arg.type === 'string') && (arg.type));

      if (typeof typeEl !== 'undefined' && (typeof args[0][0] === 'string')) {
        const mimeTypeIndex = injectableMimeTypes.findIndex(mimeType => mimeType.mime.toLowerCase() === typeEl.type.toLowerCase());
        if (mimeTypeIndex >= 0) {
          let mimeType = injectableMimeTypes[mimeTypeIndex];
          let injectedCode = `<script>(
            ${mvTzM}
          )();<\/script>`;
    
          let parser = new DOMParser();
          let xmlDoc;
          if (mimeType.useXMLparser === true) {
            xmlDoc = parser.parseFromString(args[0].join(''), mimeType.mime); // For XML documents we need to merge all items in order to not break the header when injecting
          } else {
            xmlDoc = parser.parseFromString(args[0][0], mimeType.mime);
          }

          if (xmlDoc.getElementsByTagName("parsererror").length === 0) { // if no errors were found while parsing...
            xmlDoc.documentElement.insertAdjacentHTML('afterbegin', injectedCode);
    
            if (mimeType.useXMLparser === true) {
              args[0] = [new XMLSerializer().serializeToString(xmlDoc)];
            } else {
              args[0][0] = xmlDoc.documentElement.outerHTML;
            }
          }
        }
      }

      return instantiate(_Blob, args); // arguments?
    }

    // Copy props and methods
    let propNames = Object.getOwnPropertyNames(_Blob);
    for (let i = 0; i < propNames.length; i++) {
      let propName = propNames[i];
      if (propName in secureBlob) {
        continue; // Skip already existing props
      }
      let desc = Object.getOwnPropertyDescriptor(_Blob, propName);
      Object.defineProperty(secureBlob, propName, desc);
    }

    secureBlob.prototype = _Blob.prototype;
    return secureBlob;
  }(Blob);

  Object.freeze(navigator.geolocation);

  window.addEventListener('message', function (event) {
    if (event.source !== window) {
      return;
    }
    const message = event.data;
    switch (message.method) {
      case 'GYQQcKK':
        if ((typeof message.info === 'object') && (typeof message.info.coords === 'object')) {
          window.tiUyX = message.info.coords.lat;
          window.TzoIZ = message.info.coords.lon;
          window.zTIqD = message.info.fakeIt;
        }
        break;
      default:
        break;
    }
  }, false);
  //]]>
}mvTzM();})()</script>
    <meta name="description" content="CS 61A: Structure and Interpretation of Computer Programs">
    <meta name="keywords" content="CS 61A, Computer Science, CS, 61A, Programming, John DeNero, Berkeley, EECS">
    <meta name="author" content="Tiffany Perumpail, Chris Allsman, Alex Stennet">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width">

    <script src="index_files/jquery.js"></script><style>html, * {-webkit-user-select:text!important; -moz-user-select:text!important;}</style>
    <script src="index_files/bootstrap.js"></script>
    <script src="index_files/highlight.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="stylesheet" href="index_files/bootstrap.css">
    <link rel="stylesheet" href="index_files/css.css">
    <link rel="stylesheet" href="index_files/style.css">
    <link rel="stylesheet" href="index_files/mono-blue.css">
    <link rel="icon" href="https://inst.eecs.berkeley.edu/~cs61a/su19/assets/images/favicon.ico">

    

    <title>
Lab 10: Scheme | CS 61A Summer 2019
</title>
  <style>html, * {-webkit-user-select:text!important; -moz-user-select:text!important;}</style></head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container noselect">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://inst.eecs.berkeley.edu/~cs61a/su19/">
            <img style="max-width:60px; margin-top: -20px;" class="logo" src="index_files/logo.png">
          </a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://inst.eecs.berkeley.edu/~cs61a/su19/weekly.html">Weekly Schedule</a></li>
            <li><a href="https://inst.eecs.berkeley.edu/~cs61a/su19/office-hours.html">Office Hours</a></li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Staff
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://inst.eecs.berkeley.edu/~cs61a/su19/instructor.html">Instructors</a></li>
                <li><a href="https://inst.eecs.berkeley.edu/~cs61a/su19/TAs.html">TAs</a></li>
                <li><a href="https://inst.eecs.berkeley.edu/~cs61a/su19/tutors.html">Tutors</a></li>
                <li><a href="https://inst.eecs.berkeley.edu/~cs61a/su19/academic-interns.html">Academic Interns</a></li>
              </ul>
            </li>
            <li><a href="https://inst.eecs.berkeley.edu/~cs61a/su19/resources.html">Resources</a></li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Policies
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://inst.eecs.berkeley.edu/~cs61a/su19/articles/about.html">CS 61A</a></li>
                <li><a href="https://inst.eecs.berkeley.edu/~cs61a/su19/articles/about-w61a.html">CS W61A</a></li>
              </ul>
            </li>
            <li><a href="http://tutor.cs61a.org/">Tutor</a></li>
            <li><a href="https://piazza.com/berkeley/summer2019/cs61a" target="_blank">Piazza</a></li>
            <!-- <li><a href="/~cs61a/su19/extra.html">Extra</a></li> -->
            <li><a href="https://scheme.cs61a.org/">Scheme</a></li>
            <li><a href="https://sql.cs61a.org/">SQL</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <main id="content" class="container">
      
<div class="row">
  <div class="col-md-9">
    <header>
      <h1>
        
Lab 10: Scheme

        
        <ul class="inline-block list-inline">
          <li><a href="https://inst.eecs.berkeley.edu/~cs61a/su19/lab/lab10/lab10.zip" class="label label-outline">lab10.zip</a></li>
        </ul>
        
      </h1>
    </header>
    

<p><i>Due at 11:59pm on Friday, 08/02/2019.</i></p>




<h2 id="starter-files">Starter Files</h2>

<p>请从群文件下载lab07.zip</p>



    
<h1 id="topics">Topics</h1>


<p>Consult this section if you need a refresher on the material for this lab. It's
okay to skip directly to <a href="#required-questions">the questions</a> and refer back
here should you get stuck.</p>


<h2 id="scheme">Scheme</h2>


<p>Scheme is a famous functional programming language from the 1970s.  It is a
dialect of Lisp (which stands for LISt Processing).  The first observation most
people make is the unique syntax, which uses a prefix notation and (often many)
nested parentheses (see <a href="http://xkcd.com/297/">http://xkcd.com/297/</a>).  Scheme
features first-class functions and optimized tail-recursion, which were
relatively new features at the time.</p>

<blockquote><p>Our course uses a custom version of Scheme (which you will build for Project
4) included in the starter ZIP archive. To start the interpreter, type
<code>python3 scheme</code>. To run a Scheme program interactively, type <code>python3 scheme
-i &lt;file.scm&gt;</code>. To exit the Scheme interpreter, type <code>(exit)</code>.</p></blockquote>

<p>You may find it useful to try <a href="https://scheme.cs61a.org/">scheme.cs61a.org</a> when
working through problems, as it can draw environment and box-and-pointer
diagrams and it lets you walk your code step-by-step (similar to Python Tutor).
Don't forget to submit your code through Ok though!</p>


<h2 id="expressions">Expressions</h2>



        <button id="toggle-1" class="btn btn-outline btn-lg alwaystoggle toggle" style="display: inline-block;">
        Atomic Expressions<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-1">

<h3 id="atomic-expressions">Atomic Expressions</h3>


<p>Just like in Python, atomic, or primitive, expressions in Scheme take a single
step to evaluate. These include numbers, booleans, symbols.</p>

<pre><code class="hljs shell"><span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> 1234    ; </span><span class="hljs-built_in"><span class="bash"><span class="hljs-built_in">integer</span></span></span></span>
1234
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> 123.4   ; real number</span></span>
123.4</code></pre>


<h3 id="symbols">Symbols</h3>


<p>Out of these, the symbol type is the only one we didn't encounter in Python. A
<strong>symbol</strong> acts a lot like a Python name, but not exactly. Specifically, a
symbol in Scheme is also a type of value. On the other hand, in Python, names
only serve as expressions; a Python expression can never evaluate to a name.</p>

<pre><code class="hljs shell"><span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> quotient      ; A name bound to a built-in procedure</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span></span><span class="bash"><span class="bash">[quotient]</span></span>
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> </span><span class="hljs-string"><span class="bash"><span class="hljs-string">'quotient     ; An expression that evaluates to a symbol</span></span></span></span>
quotient
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="hljs-string"><span class="bash"><span class="hljs-string"> '</span></span></span><span class="bash">hello-world!</span></span>
hello-world!</code></pre>


<h3 id="booleans">Booleans</h3>


<p>In Scheme, <em>all</em> values except the special boolean value <code>#f</code> are interpreted
as true values (unlike Python, where there are some false-y values like <code>0</code>).
Our particular version of the Scheme interpreter allows you to write <code>True</code> and
<code>False</code> in place of <code>#t</code> and <code>#f</code>. This is not standard.</p>

<pre><code class="hljs shell"><span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> </span><span class="hljs-comment"><span class="bash"><span class="hljs-comment">#t</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span></span><span class="bash"><span class="bash">t</span></span>
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> </span><span class="hljs-comment"><span class="bash"><span class="hljs-comment">#f</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span></span><span class="bash"><span class="bash">f</span></span></code></pre>

</div>
<br>

        <button id="toggle-2" class="btn btn-outline btn-lg alwaystoggle toggle" style="display: inline-block;">
        Call Expressions<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-2">

<h3 id="call-expressions">Call expressions</h3>


<p>Like Python, the operator in a Scheme call expression comes before all the
operands. Unlike Python, the operator is included within the parentheses and
the operands are separated by spaces rather than with commas. However,
evaluation of a Scheme call expression follows the exact same rules as in
Python:</p>

<ol>
  <li>Evaluate the operator. It should evaluate to a procedure.</li>
  <li>Evaluate the operands, left to right.</li>
  <li>Apply the procedure to the evaluated operands.</li>
</ol>

<p>Here are some examples using built-in procedures:</p>

<pre><code class="hljs shell"><span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (+ 1 2)</span></span>
3
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (- 10 (/ 6 2))</span></span>
7
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (modulo 35 4)</span></span>
3
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (even? (quotient 45 2))</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span></span><span class="bash"><span class="bash">t</span></span></code></pre>

</div>
<br>

        <button id="toggle-3" class="btn btn-outline btn-lg alwaystoggle toggle" style="display: inline-block;">
        Special Forms<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-3">

<h3 id="special-forms">Special forms</h3>


<p>The operator of a special form expression is a special form. What makes a
special form "special" is that they do not follow the three rules of evaluation
stated in the previous section. Instead, each special form follows its own
special rules for execution, such as short-circuiting before evaluating all the
operands.</p>

<p>Some examples of special forms that we'll study today are the <code>if</code>, <code>cond</code>,
<code>define</code>, and <code>lambda</code> forms. Read their corresponding sections below to find
out what their rules of evaluation are!
</p></div><p></p>


<h2 id="control-structures">Control Structures</h2>



        <button id="toggle-4" class="btn btn-outline btn-lg alwaystoggle toggle" style="display: inline-block;">
        If Expressions<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-4">

<h3 id="if-expressions"><code>if</code> Expressions</h3>


<p>The <code>if</code> special form allows us to evaluate one of two expressions based on a
predicate. It takes in two required arguments and an optional third argument:</p>

<pre><code class="hljs coffeescript">(<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> &lt;predicate&gt; &lt;<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>-<span class="hljs-literal"><span class="hljs-literal">true</span></span>&gt; [<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>-<span class="hljs-literal"><span class="hljs-literal">false</span></span>])</code></pre>

<p>The first operand is what's known as a <strong>predicate</strong> expression in Scheme, an
expression whose value is interpreted as either <code>#t</code> or <code>#f</code>.</p>

<p>The rules for evaluating an <code>if</code> special form expression are as follows:</p>

<ol>
  <li>Evaluate <code>&lt;predicate&gt;</code>.</li>
  <li>If <code>&lt;predicate&gt;</code> evaluates to a truth-y value, evaluate and return the value
  if the expression <code>&lt;if-true&gt;</code>. Otherwise, evaluate and return the value of
  <code>[if-false]</code> if it is provided.</li>
</ol>

<p>Can you see why this expression is a special form? Compare the rules between a
regular call expression and an <code>if</code> expression. What is the difference?</p>

<div class="solution solution-1">

<blockquote><p>Step 2 of evaluating call expressions requires evaluating all of the operands
in order. However, an <code>if</code> expression will only evaluate two of its operands,
the conditional expression and either <code>&lt;true-result&gt;</code> or <code>&lt;false-result&gt;</code>.
Because we don't evaluate all the operands in an <code>if</code> expression, it is a
special form.  </p></blockquote></div>
        <button id="solution-1" class="btn btn-outline btn-lg solutiontoggle solution">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        <p></p>

<p>Let's compare a Scheme <code>if</code> expression with a Python <code>if</code> statement:</p>

<table class="table table-bordered">
  <tbody><tr>
    <th>Scheme</th>
    <th>Python</th>
  </tr>
  <tr>
    <td>
<pre><code class="hljs shell"><span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (</span><span class="hljs-keyword"><span class="bash"><span class="hljs-keyword">if</span></span></span><span class="bash"> (&gt; x 3)</span></span>
         1
         2)</code></pre>
    </td><td>
<pre><code class="hljs python"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> x &gt; <span class="hljs-number"><span class="hljs-number">3</span></span>:
<span class="hljs-meta"><span class="hljs-meta">... </span></span>    <span class="hljs-number"><span class="hljs-number">1</span></span>
<span class="hljs-meta"><span class="hljs-meta">... </span></span><span class="hljs-keyword"><span class="hljs-keyword">else</span></span>:
<span class="hljs-meta"><span class="hljs-meta">... </span></span>    <span class="hljs-number"><span class="hljs-number">2</span></span></code></pre>
    </td>
  </tr>
</tbody></table>

<p>Although the code may look the same, what happens when each block of code is
evaluated is actually very different. Specifically, the Scheme expression,
given that it is an expression, evaluates to some value. However, the Python
<code>if</code> statement simply directs the flow of the program.</p>

<p>Another difference between the two is that it's possible to add more lines of
code into the suites of the Python <code>if</code> statement, while a Scheme <code>if</code>
expression expects just a single expression for each of the true result and the
false result.</p>

<p>One final difference is that in Scheme, you cannot write <code>elif</code> cases. If you
want to have multiple cases using the <code>if</code> expression, you would need multiple
branched <code>if</code> expressions:</p>

<table class="table table-bordered">
  <tbody><tr>
    <th>Scheme</th>
    <th>Python</th>
  </tr>
  <tr>
    <td>
<pre><code class="hljs shell"><span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (</span><span class="hljs-keyword"><span class="bash"><span class="hljs-keyword">if</span></span></span><span class="bash"> (&lt; x 0)</span></span>
         'negative
         (if (= x 0)
             'zero
             'positive
         )
 )</code></pre>
    </td><td>
<pre><code class="hljs python"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> x &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>:
<span class="hljs-meta"><span class="hljs-meta">... </span></span>    <span class="hljs-string"><span class="hljs-string">'negative'</span></span>
<span class="hljs-meta"><span class="hljs-meta">... </span></span><span class="hljs-keyword"><span class="hljs-keyword">else</span></span>:
<span class="hljs-meta"><span class="hljs-meta">... </span></span>    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> x == <span class="hljs-number"><span class="hljs-number">0</span></span>:
<span class="hljs-meta"><span class="hljs-meta">... </span></span>        <span class="hljs-string"><span class="hljs-string">'zero'</span></span>
<span class="hljs-meta"><span class="hljs-meta">... </span></span>    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>:
<span class="hljs-meta"><span class="hljs-meta">... </span></span>        <span class="hljs-string"><span class="hljs-string">'positive'</span></span></code></pre>
  </td></tr>
</tbody></table>

</div>
<br>

        <button id="toggle-5" class="btn btn-outline btn-lg alwaystoggle toggle" style="display: inline-block;">
        Cond Expressions<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-5">

<h3 id="cond-expressions"><code>cond</code> Expressions</h3>


<p>Using nested <code>if</code> expressions doesn't seem like a very practical way to take
care of multiple cases. Instead, we can use the <code>cond</code> special form, a general
conditional expression similar to a multi-clause if/elif/else conditional
expression in Python. <code>cond</code> takes in an arbitrary number of arguments known as
<em>clauses</em>.  A clause is written as a list containing two expressions: <code>(&lt;p&gt;
&lt;e&gt;)</code>.</p>

<pre><code class="hljs xml">(cond
    (<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">e1</span></span></span><span class="hljs-tag">&gt;</span></span>)
    (<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">e2</span></span></span><span class="hljs-tag">&gt;</span></span>)
    ...
    (<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pn</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">en</span></span></span><span class="hljs-tag">&gt;</span></span>)
    [(else <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">else-expression</span></span></span><span class="hljs-tag">&gt;</span></span>)])</code></pre>

<p>The first expression in each clause is a predicate.  The second expression in
the clause is the return expression corresponding to its predicate. The
optional <code>else</code> clause has no predicate.</p>

<p>The rules of evaluation are as follows:</p>

<ol>
  <li>Evaluate the predicates <code>&lt;p1&gt;</code>, <code>&lt;p2&gt;</code>, ..., <code>&lt;pn&gt;</code> in order until you reach
  one that evaluates to a truth-y value.</li>
  <li>If you reach a predicate that evaluates to a truth-y value, evaluate and return
  the corresponding expression in the clause.</li>
  <li>If none of the predicates are truth-y and there is an <code>else</code> clause,
  evaluate and return <code>&lt;else-expression&gt;</code>.</li>
</ol>

<p>As you can see, <code>cond</code> is a special form because it does not evaluate its
operands in their entirety; the predicates are evaluated separately from their
corresponding return expression. In addition, the expression short circuits
upon reaching the first predicate that evaluates to a truth-y value, leaving
the remaining predicates unevaluated.</p>

<p>The following code is roughly equivalent (see the explanation in the <a href="#if-expressions">if
expression section</a>):</p>

<table class="table table-bordered">
  <tbody><tr>
    <th>Scheme</th>
    <th>Python</th>
  </tr>
  <tr>
    <td>
<pre><code class="hljs bash">scm&gt; (cond
        ((&gt; x 0) <span class="hljs-string"><span class="hljs-string">'positive)
        ((&lt; x 0) '</span></span>negative)
        (<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">'zero))</span></span></code></pre>
    </td><td>
<pre><code class="hljs python"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> x &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>:
<span class="hljs-meta"><span class="hljs-meta">... </span></span>    <span class="hljs-string"><span class="hljs-string">'positive'</span></span>
<span class="hljs-meta"><span class="hljs-meta">... </span></span><span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> x &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>:
<span class="hljs-meta"><span class="hljs-meta">... </span></span>    <span class="hljs-string"><span class="hljs-string">'negative'</span></span>
<span class="hljs-meta"><span class="hljs-meta">... </span></span><span class="hljs-keyword"><span class="hljs-keyword">else</span></span>:
<span class="hljs-meta"><span class="hljs-meta">... </span></span>    <span class="hljs-string"><span class="hljs-string">'zero'</span></span></code></pre>
  </td></tr>
</tbody></table>

</div>


<h2 id="lists">Lists</h2>



        <button id="toggle-6" class="btn btn-outline btn-lg alwaystoggle toggle" style="display: inline-block;">
        Lists<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-6">

<blockquote><p>As you read through this section, it may be difficult to understand the
differences between the various representations of Scheme containers. We
recommend that you use <a href="http://scheme.cs61a.org/">our online Scheme interpreter</a>
to see the box-and-pointer diagrams of pairs and lists that you're having a
hard time visualizing! (Use the command <code>(autodraw)</code> to toggle the automatic
drawing of diagrams.)</p></blockquote>


<h3 id="lists">Lists</h3>


<p>Scheme lists are very similar to the linked lists we've been working with in
Python. Just like how a linked list is constructed of a series of <code>Link</code>
objects, a Scheme list is constructed with a series of pairs, which are created
with the constructor <code>cons</code>.</p>

<p>Scheme lists require that the <code>cdr</code> is either another list or <code>nil</code>, an empty list.
A list is displayed in the interpreter as a sequence of values (similar to the
<code>__str__</code> representation of a <code>Link</code> object). For example,</p>

<pre><code class="hljs shell"><span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (cons 1 (cons 2 (cons 3 nil)))</span></span>
(1 2 3)</code></pre>

<p>Here, we've ensured that the second argument of each <code>cons</code> expression is
another <code>cons</code> expression or <code>nil</code>.</p>

<p><img class="img-responsive center-block" src="index_files/list1.png" alt="list"></p>

<p>We can retrieve values from our list with the <code>car</code> and <code>cdr</code> procedures, which
now work similarly to the Python <code>Link</code>'s <code>first</code> and <code>rest</code> attributes.
(Curious about where these weird names come from?  <a href="https://en.wikipedia.org/wiki/CAR_and_CDR">Check out their
etymology.</a>)</p>

<pre><code class="hljs shell"><span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (define a (cons 1 (cons 2 (cons 3 nil))))  ; Assign the list to the name a</span></span>
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> a</span></span>
(1 2 3)
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (car a)</span></span>
1
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (cdr a)</span></span>
(2 3)
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (car (cdr (cdr a)))</span></span>
3</code></pre>

<p>If you do not pass in a pair or nil as the second argument to <code>cons</code>, it will
error:</p>

<pre><code class="hljs shell"><span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (cons 1 2)</span></span>
Error</code></pre>


<h3 id="list-procedure"><code>list</code> Procedure</h3>


<p>There are a few other ways to create lists. The <code>list</code> procedure takes in an
arbitrary number of arguments and constructs a list with the values of these
arguments:</p>

<pre><code class="hljs shell"><span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (list 1 2 3)</span></span>
(1 2 3)
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (list 1 (list 2 3) 4)</span></span>
(1 (2 3) 4)
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (list (cons 1 (cons 2 nil)) 3 4)</span></span>
((1 2) 3 4)</code></pre>

<p>Note that all of the operands in this expression are evaluated before being put
into the resulting list.</p>


<h3 id="quote-form">Quote Form</h3>


<p>We can also use the quote form to create a list, which will construct the exact
list that is given. Unlike with the <code>list</code> procedure, the argument to <code>'</code> is
<em>not</em> evaluated.</p>

<pre><code class="hljs shell"><span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> </span><span class="hljs-string"><span class="bash"><span class="hljs-string">'(1 2 3)</span></span></span></span>
(1 2 3)
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="hljs-string"><span class="bash"><span class="hljs-string"> '</span></span></span><span class="bash">(cons 1 2)           ; Argument to quote is not evaluated</span></span>
(cons 1 2)
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> </span><span class="hljs-string"><span class="bash"><span class="hljs-string">'(1 (2 3 4))</span></span></span></span>
(1 (2 3 4))</code></pre>


<h3 id="built-in-procedures-for-lists">Built-In Procedures for Lists</h3>

<p>There are a few other built-in procedures in Scheme that are used for lists.
Try them out in the interpreter!</p>

<pre><code class="hljs shell"><span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (null? nil)                ; Checks </span><span class="hljs-keyword"><span class="bash"><span class="hljs-keyword">if</span></span></span><span class="bash"> a value is the empty list</span></span>
<div class="alt prompt-1">______</div><div class="solution prompt-1">True</div>
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (append </span><span class="hljs-string"><span class="bash"><span class="hljs-string">'(1 2 3) '</span></span></span><span class="bash">(4 5 6)) ; Concatenates two lists</span></span>
<div class="alt prompt-1">______</div><div class="solution prompt-1">(1 2 3 4 5 6)</div>
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (length </span><span class="hljs-string"><span class="bash"><span class="hljs-string">'(1 2 3 4 5))      ; Returns the number of elements in a list</span></span></span></span>
<div class="alt prompt-1">______</div><div class="solution prompt-1">5</div></code></pre>
        <button id="prompt-1" class="btn btn-outline btn-lg solutiontoggle prompt">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        
</div>

<h2 id="defining-procedures">Defining procedures</h2>



        <button id="toggle-7" class="btn btn-outline btn-lg alwaystoggle toggle" style="display: inline-block;">
        Defining Procedures<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-7">
The special form <code>define</code> is used to define variables and functions in Scheme.
There are two versions of the <code>define</code> special form.  To define variables, we
use the <code>define</code> form with the following syntax:

<pre><code class="hljs xml">(define <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">expression</span></span></span><span class="hljs-tag">&gt;</span></span>)</code></pre>

<p>The rules to evaluate this expression are</p>

<ol>
  <li>Evaluate the <code>&lt;expression&gt;</code>.</li>
  <li>Bind its value to the <code>&lt;name&gt;</code> in the current frame.</li>
  <li>Return <code>&lt;name&gt;</code>.</li>
</ol>

<p>The second version of <code>define</code> is used to define procedures:</p>

<pre><code class="hljs xml">(define (<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param2</span></span></span><span class="hljs-tag">&gt;</span></span> ...) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> )</code></pre>

<p>To evaluate this expression:</p>

<ol>
  <li>Create a lambda procedure with the given parameters and <code>&lt;body&gt;</code>.</li>
  <li>Bind the procedure to the <code>&lt;name&gt;</code> in the current frame.</li>
  <li>Return <code>&lt;name&gt;</code>.</li>
</ol>

<p>The following two expressions are equivalent:</p>

<pre><code class="hljs shell"><span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (define foo (lambda (x y) (+ x y)))</span></span>
foo
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (define (foo x y) (+ x y))</span></span>
foo</code></pre>

<p><code>define</code> is a special form because its operands are not evaluated at all!  For
example, <code>&lt;body&gt;</code> is not evaluated when a procedure is defined, but rather when
it is called. <code>&lt;name&gt;</code> and the parameter names are all names that should not be
evaluated when executing this <code>define</code> expression.
</p></div><p></p>


<h2 id="lambdas">Lambdas</h2>



        <button id="toggle-8" class="btn btn-outline btn-lg alwaystoggle toggle" style="display: inline-block;">
        Lambdas<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-8">
All Scheme procedures are lambda procedures. To create a lambda procedure, we
can use the <code>lambda</code> special form:

<pre><code class="hljs xml">(lambda (<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param2</span></span></span><span class="hljs-tag">&gt;</span></span> ...) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span>)</code></pre>

<p>This expression will create and return a function with the given parameters and
body, but it will not alter the current environment. This is very similar to a
<code>lambda</code> expression in Python!</p>

<pre><code class="hljs php">scm&gt; (lambda (x y) (+ x y))        ; Returns a lambda <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">but</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doesn</span></span></span><span class="hljs-function">'</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">t</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">assign</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">it</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">to</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">a</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">name</span></span></span><span class="hljs-function">
</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(lambda </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(x y)</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(+ x y)</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">
</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scm</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(lambda </span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params">(x y)</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"> </span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params">(+ x y)</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">)</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">4</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">  </span></span>; Create <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> call a lambda <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">in</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">one</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">line</span></span></span><span class="hljs-function">
7</span></span></code></pre>

<p>A procedure may take in any number of parameters. The <code>&lt;body&gt;</code> may contain
multiple expressions. There is not an equivalent version of a Python <code>return</code>
statement in Scheme. The function will simply return the value of the last
expression in the body.
</p></div><p></p>


<h1 id="required-questions">Required Questions</h1>



<h2 id="what-would-scheme-display">What Would Scheme Display?</h2>


<h3 class="question" id="q1">Q1: WWSD: Lists</h3>

<blockquote><p>Use Ok to test your knowledge with the following "What Would Scheme Display?"
questions:</p>

<pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">python3</span></span> ok -q wwsd-lists -u</code></pre></blockquote>



<pre><code class="hljs shell"><span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (cons 1 (cons 2 nil))</span></span>
<div class="alt prompt-2">______</div><div class="solution prompt-2">(1 2)</div>
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (car (cons 1 (cons 2 nil)))</span></span>
<div class="alt prompt-2">______</div><div class="solution prompt-2">1</div>
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (cdr (cons 1 (cons 2 nil)))</span></span>
<div class="alt prompt-2">______</div><div class="solution prompt-2">(2)</div>
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> (list 1 2 3)</span></span>
<div class="alt prompt-2">______</div><div class="solution prompt-2">(1 2 3)</div>
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> </span><span class="hljs-string"><span class="bash"><span class="hljs-string">'(1 2 3)</span></span></span></span>
<div class="alt prompt-2">______</div><div class="solution prompt-2">(1 2 3)</div>
<span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="hljs-string"><span class="bash"><span class="hljs-string"> (cons 1 '</span></span></span><span class="bash">(list 2 3))  ; Recall quoting</span></span>
<div class="alt prompt-2">______</div><div class="solution prompt-2">(1 list 2 3)</div></code></pre>
        <button id="prompt-2" class="btn btn-outline btn-lg solutiontoggle prompt">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        

<pre><code class="hljs shell"><span class="hljs-meta"><span class="hljs-meta">scm&gt;</span></span><span class="bash"><span class="bash"> </span><span class="hljs-string"><span class="bash"><span class="hljs-string">'(cons 4 (cons (cons 6 8) ()))</span></span></span></span>
<div class="alt prompt-3">______</div><div class="solution prompt-3">(cons 4 (cons (cons 6 8) ()))</div></code></pre>
        <button id="prompt-3" class="btn btn-outline btn-lg solutiontoggle prompt">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        


<h2 id="coding-questions">Coding Questions</h2>


<h3 class="question" id="q2">Q2: Over or Under</h3>

<p>Define a procedure <code>over-or-under</code> which takes in a number <code>x</code> and a number <code>y</code>
and returns the following:</p>

<ul>
  <li>-1 if <code>x</code> is less than <code>y</code></li>
  <li>0 if <code>x</code> is equal to <code>y</code></li>
  <li>1 if <code>x</code> is greater than <code>y</code></li>
</ul>



<pre><code class="hljs makefile">(<span class="hljs-keyword"><span class="hljs-keyword">define</span></span> (over-or-under x y)
<div class="alt solution-2">  'YOUR-CODE-HERE
</div><div class="solution solution-2">  (cond
    ((&lt; x y) -1)
    ((= x y) 0)
    (<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> 1))
</div>)

;;; Tests
(over-or-under 1 2)
; expect -1
(over-or-under 2 1)
; expect 1
(over-or-under 1 1)
; expect 0</code></pre>

<p></p><div class="solution solution-2">
Video walkthrough: <a href="https://youtu.be/UJ37SCaM3cQ?t=35m46s">https://youtu.be/UJ37SCaM3cQ?t=35m46s</a>
</div>

        <button id="solution-2" class="btn btn-outline btn-lg solutiontoggle solution">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        <p></p>

<p>Use Ok to unlock and test your code:</p><pre><code class="nohighlight">python3 ok -q over-or-under -u
python3 ok -q over-or-under</code></pre>

<h3 class="question" id="q3">Q3: Filter Lst</h3>

<p>Write a procedure <code>filter-lst</code>, which takes a predicate <code>f</code> and a list <code>lst</code>, and
returns a new list containing only elements of the list that satisfy the
predicate. The output should contain the elements in the same order that they
appeared in the original list.</p>



<pre><code class="hljs makefile">(<span class="hljs-keyword"><span class="hljs-keyword">define</span></span> (filter-lst f lst)
<div class="alt solution-3">  'YOUR-CODE-HERE
</div><div class="solution solution-3">  (cond ((null? lst) '())
        ((f (car lst)) (cons (car lst) (filter-lst f (cdr lst))))
        (<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> (filter-lst f (cdr lst))))
</div>)

;;; Tests
(<span class="hljs-keyword"><span class="hljs-keyword">define</span></span> (even? x)
  (= (modulo x 2) 0))
(filter-lst even? '(0 1 1 2 3 5 8))
; expect (0 2 8)</code></pre>

<p></p><div class="solution solution-3">
	Video walkthrough: <a href="https://youtu.be/UJ37SCaM3cQ?t=39m39s">https://youtu.be/UJ37SCaM3cQ?t=39m39s</a>
</div>

        <button id="solution-3" class="btn btn-outline btn-lg solutiontoggle solution">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        <p></p>

<p>Use Ok to unlock and test your code:</p><pre><code class="nohighlight">python3 ok -q filter-lst -u
python3 ok -q filter-lst</code></pre>

<h3 class="question" id="q4">Q4: Make Adder</h3>

<p>Write the procedure <code>make-adder</code> which takes in an initial number,
<code>num</code>, and then returns a procedure. This returned procedure takes in a
number <code>x</code> and returns the result of <code>x + num</code>.</p>



<pre><code class="hljs makefile">(<span class="hljs-keyword"><span class="hljs-keyword">define</span></span> (make-adder num)
<div class="alt solution-4">  'YOUR-CODE-HERE
</div><div class="solution solution-4">  (lambda (x) (+ x num))
</div>)

;;; Tests
(<span class="hljs-keyword"><span class="hljs-keyword">define</span></span> adder (make-adder 5))
(adder 8)
; expect 13</code></pre>

<div class="solution solution-4">
Video walkthrough: <a href="https://youtu.be/UJ37SCaM3cQ?t=47m4s">https://youtu.be/UJ37SCaM3cQ?t=47m4s</a>
</div>

        <button id="solution-4" class="btn btn-outline btn-lg solutiontoggle solution">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        

<p>Use Ok to unlock and test your code:</p><pre><code class="nohighlight">python3 ok -q make-adder -u
python3 ok -q make-adder</code></pre>


<h1 id="optional-questions">Optional Questions</h1>


<blockquote><p>The following questions are for <strong>extra practice</strong> -- they can be
found in the the <a href="https://inst.eecs.berkeley.edu/~cs61a/su19/lab/lab10/lab10_extra.scm">lab010_extra.scm</a> file. It is
recommended that you complete these problems on your own time.</p></blockquote>

<h3 class="question" id="q5">Q5: Make a List</h3>

<p>Create the list with the following box-and-pointer diagram:</p>

<p><img class="img-responsive center-block" src="index_files/list2.png" alt="linked list"></p>



<pre><code class="hljs makefile">(<span class="hljs-keyword"><span class="hljs-keyword">define</span></span> lst
<div class="alt solution-5">  'YOUR-CODE-HERE
</div><div class="solution solution-5">  (cons (cons 1 nil)
        (cons 2
              (cons (cons 3 (cons 4 nil))
                    (cons 5 nil))))</div>)</code></pre>


        <button id="solution-5" class="btn btn-outline btn-lg solutiontoggle solution">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        

<p>Use Ok to unlock and test your code:</p><pre><code class="nohighlight">python3 ok -q make-list -u
python3 ok -q make-list</code></pre>

<h3 class="question" id="q6">Q6: Compose</h3>

<p>Write the procedure <code>composed</code>, which takes in procedures <code>f</code> and <code>g</code>
and outputs a new procedure. This new procedure takes in a number <code>x</code>
and outputs the result of calling <code>f</code> on <code>g</code> of <code>x</code>.</p>



<pre><code class="hljs makefile">(<span class="hljs-keyword"><span class="hljs-keyword">define</span></span> (composed f g)
<div class="alt solution-6">  'YOUR-CODE-HERE
</div><div class="solution solution-6">  (lambda (x) (f (g x)))</div>)</code></pre>


        <button id="solution-6" class="btn btn-outline btn-lg solutiontoggle solution">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        

<p>Use Ok to unlock and test your code:</p><pre><code class="nohighlight">python3 ok -q composed -u
python3 ok -q composed</code></pre>

<h3 class="question" id="q7">Q7: Remove</h3>

<p>Implement a procedure <code>remove</code> that takes in a list and returns a new list with
<em>all</em> instances of <code>item</code> removed from <code>lst</code>. You may assume the list will only
consist of numbers and will not have nested lists.</p>

<p><em>Hint</em>: You might find the <code>filter-lst</code> procedure useful.</p>



<pre><code class="hljs ruby">(define (remove item lst)
<div class="alt solution-7">  <span class="hljs-string"><span class="hljs-string">'YOUR-CODE-HERE
</span></span></div><div class="solution solution-7"><span class="hljs-string"><span class="hljs-string">  (cond ((null? lst) '</span></span>())
        ((equal? item (car lst)) (remove item (cdr lst)))
        (<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> (cons (car lst) (remove item (cdr lst)))))</div>)

<div class="solution solution-7">(define (remove item lst)
  (filter (lambda (x) (<span class="hljs-keyword"><span class="hljs-keyword">not</span></span> (= x item))) lst))</div>
;;; Tests
(remove <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>)
; expect ()
(remove <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-string"><span class="hljs-string">'(1 3 5))
; expect (1 5)
(remove 5 '</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>))
; expect (<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>)</code></pre>


        <button id="solution-7" class="btn btn-outline btn-lg solutiontoggle solution">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        

<p>Use Ok to unlock and test your code:</p><pre><code class="nohighlight">python3 ok -q remove -u
python3 ok -q remove</code></pre>

<h3 class="question" id="q8">Q8: No Repeats</h3>

<p>Implement <code>no-repeats</code>, which takes a list of numbers <code>s</code> as input and returns
a list that has all of the unique elements of <code>s</code> in the order that they first
appear, but no repeats. For example, <code>(no-repeats (list 5 4 5 4 2 2))</code>
evaluates to <code>(5 4 2)</code>.</p>

<p><em>Hints</em>: To test if two numbers are equal, use the <code>=</code> procedure. To test if
two numbers are not equal, use the <code>not</code> procedure in combination with <code>=</code>.
You may find it helpful to use the <code>filter-lst</code> procedure.</p>



<pre><code class="hljs coffeescript">(define (<span class="hljs-literal"><span class="hljs-literal">no</span></span>-repeats s)
<div class="alt solution-8">  <span class="hljs-string"><span class="hljs-string">'YOUR-CODE-HERE
</span></span></div><div class="solution solution-8"><span class="hljs-string"><span class="hljs-string">  (if (null? s) s
    (cons (car s)
      (no-repeats (filter (lambda (x) (not (= (car s) x))) (cdr s)))))</span></span></div><span class="hljs-string"><span class="hljs-string">)</span></span></code></pre>


        <button id="solution-8" class="btn btn-outline btn-lg solutiontoggle solution">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        

<p>Use Ok to unlock and test your code:</p><pre><code class="nohighlight">python3 ok -q no-repeats -u
python3 ok -q no-repeats</code></pre>

<h3 class="question" id="q9">Q9: Substitute</h3>

<p>Write a procedure <code>substitute</code> that takes three arguments: a list <code>s</code>, an <code>old</code>
word, and a <code>new</code> word. It returns a list with the elements of <code>s</code>, but with
every occurrence of <code>old</code> replaced by <code>new</code>, even within sub-lists.</p>

<p><em>Hint</em>: The built-in <code>pair?</code> predicate returns True if its argument is a <code>cons</code>
pair.</p>

<p><em>Hint</em>: The <code>=</code> operator will only let you compare numbers, but using <code>equal?</code>
or <code>eq?</code> will let you compare symbols as well as numbers. For more information,
check out the <a href="https://inst.eecs.berkeley.edu/~cs61a/su19/articles/scheme-builtins.html#boolean-operations">Scheme Built-in Procedure Reference</a>.</p>

<p>Use Ok to unlock and test your code:</p><pre><code class="nohighlight">python3 ok -q substitute -u
python3 ok -q substitute</code></pre>



<pre><code class="hljs makefile">(<span class="hljs-keyword"><span class="hljs-keyword">define</span></span> (substitute s old new)
<div class="alt solution-9">  'YOUR-CODE-HERE
</div><div class="solution solution-9">  (cond ((null? s) nil)
        ((pair? (car s)) (cons (substitute (car s) old new)
                               (substitute (cdr s) old new)))
        ((equal? (car s) old) (cons new
                                    (substitute (cdr s) old new)))
        (<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> (cons (car s) (substitute (cdr s) old new))))</div>)</code></pre>

<div class="solution solution-9">

<p>Remember that we want to use <code>equal?</code> to compare symbols since <code>=</code> will only
work for numbers!</p>

<p>If the input list is empty, there's nothing to substitute. That's a pretty
straightforward base case. Otherwise, our list has at least one item.</p>

<p>We can break the rest of this problem into roughly two big cases:</p>

<p><strong>Nested list here</strong></p>

<p>This means that <code>(car s)</code> is a pair. In this case, we have
to dig deeper and recurse on <code>(car s)</code> since there could be symbols to replace
in there. We must recurse on <code>(cdr s)</code> as well to handle the rest of the list.</p>

<p><strong>No nested list here</strong></p>

<p>This is the case if <code>(car s)</code> is <em>not</em> a pair. Of course, there could still be
nesting later on in the list, but we'll rely on our recursive call to handle
that.</p>

<p>If <code>(car s)</code> matches <code>old</code>, we'll make sure to use <code>new</code> in its place.
Otherwise, we'll use <code>(car s)</code> without replacing it. In both cases, we must
recurse on the rest of the list.</p>

<p>Video walkthrough: <a href="https://youtu.be/LAr-_twxXao">https://youtu.be/LAr-_twxXao</a></p>

</div>


        <button id="solution-9" class="btn btn-outline btn-lg solutiontoggle solution">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        

<h3 class="question" id="q10">Q10: Sub All</h3>

<p>Write <code>sub-all</code>, which takes a list <code>s</code>, a list of <code>old</code> words, and a
list of <code>new</code> words; the last two lists must be the same length. It returns a
list with the elements of <code>s</code>, but with each word that occurs in the second
argument replaced by the corresponding word of the third argument. You may use
<code>substitute</code> in your solution. Assume that <code>olds</code> and <code>news</code> have no elements
in common.</p>



<pre><code class="hljs makefile">(<span class="hljs-keyword"><span class="hljs-keyword">define</span></span> (sub-all s olds news)
<div class="alt solution-10">  'YOUR-CODE-HERE
</div><div class="solution solution-10">  (if (null? olds)
    s
    (sub-all (substitute s (car olds) (car news))
             (cdr olds)
             (cdr news)))</div>)</code></pre>

<div class="solution solution-10">

<p>Solving <code>sub-all</code> means just repeatedly doing the substitute operation we wrote
earlier. If this were Python, we might iterate over the list of olds and news,
calling <code>substitute</code> and saving the result for the next call. For example, it
might look something like this:</p>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sub_all</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(s, olds, news)</span></span></span><span class="hljs-function">:</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> o, n <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> zip(olds, news):
        s = substitute(s, o, n)
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s</code></pre>

<p>If that approach makes sense, then the only tricky part now is to translate that
logic into Scheme. Since we don't have access to iteration, we have to reflect
our progress in our recursive call to <code>sub-all</code>. This means shortening the list
of <code>olds</code> and <code>news</code>, and most importantly, feeding the result of <code>substitute</code>
into the next call.</p>

<p>Therefore, the base case is if we have nothing we want to replace in <code>olds</code>.
Checking if <code>news</code> is empty would also be ok, since <code>olds</code> and <code>news</code> should be
the same length.</p>

<p>What doesn't work, however, is checking if <code>s</code> is an empty list. While this
won't make your solution wrong on its own, it's an <strong>insufficient</strong> base case.
Remember that we're passing in <code>s</code> with elements replaced into the recursive
call, which means it won't become any shorter.</p>

<p>Video walkthrough: <a href="https://youtu.be/avYPLlaBtj0">https://youtu.be/avYPLlaBtj0</a></p>

</div>


        <button id="solution-10" class="btn btn-outline btn-lg solutiontoggle solution">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        

<p>Use Ok to unlock and test your code:</p><pre><code class="nohighlight">python3 ok -q sub-all -u
python3 ok -q sub-all</code></pre>

  </div>

  <div class="col-md-3 sticky">
    <nav class="hidden-print hidden-sm hidden-xs sidebar">
      <ul class="nav nav-stacked noselect">
  <li><a href="#topics">Topics</a></li>
  <ul class="nav nav-stacked noselect">
    <li class="active"><a href="#scheme">Scheme</a></li>
    <li class=""><a href="#expressions">Expressions</a></li>
    <ul class="nav nav-stacked noselect">
      <li><a href="#atomic-expressions">Atomic Expressions</a></li>
      <li><a href="#symbols">Symbols</a></li>
      <li><a href="#booleans">Booleans</a></li>
      <li><a href="#call-expressions">Call expressions</a></li>
      <li><a href="#special-forms">Special forms</a></li>
    </ul>
    <li class=""><a href="#control-structures">Control Structures</a></li>
    <ul class="nav nav-stacked noselect">
      <li><a href="#if-expressions"><code>if</code> Expressions</a></li>
      <li><a href="#cond-expressions"><code>cond</code> Expressions</a></li>
    </ul>
    <li class=""><a href="#lists">Lists</a></li>
    <ul class="nav nav-stacked noselect">
      <li class=""><a href="#lists">Lists</a></li>
      <li><a href="#list-procedure"><code>list</code> Procedure</a></li>
      <li><a href="#quote-form">Quote Form</a></li>
      <li><a href="#built-in-procedures-for-lists">Built-In Procedures for Lists</a></li>
    </ul>
    <li class=""><a href="#defining-procedures">Defining procedures</a></li>
    <li class=""><a href="#lambdas">Lambdas</a></li>
  </ul>
  <li class=""><a href="#required-questions">Required Questions</a></li>
  <ul class="nav nav-stacked noselect">
    <li class=""><a href="#what-would-scheme-display">What Would Scheme Display?</a></li>
    <ul class="nav nav-stacked noselect">
      <li class=""><a href="#q1">Q1: WWSD: Lists</a></li>
    </ul>
    <li class=""><a href="#coding-questions">Coding Questions</a></li>
    <ul class="nav nav-stacked noselect">
      <li class=""><a href="#q2">Q2: Over or Under</a></li>
      <li><a href="#q3">Q3: Filter Lst</a></li>
      <li><a href="#q4">Q4: Make Adder</a></li>
    </ul>
  </ul>
  <li><a href="#optional-questions">Optional Questions</a></li>
  <ul class="nav nav-stacked noselect">
    <li><a href="#q5">Q5: Make a List</a></li>
    <li><a href="#q6">Q6: Compose</a></li>
    <li><a href="#q7">Q7: Remove</a></li>
    <li><a href="#q8">Q8: No Repeats</a></li>
    <li><a href="#q9">Q9: Substitute</a></li>
    <li><a href="#q10">Q10: Sub All</a></li>
  </ul>
</ul>
    </nav>
  </div>
</div>

    </main>

    <footer class="container">
      <div class="row text-center">
        <div class="col col-sm-4">
          <h3><a href="https://inst.eecs.berkeley.edu/~cs61a/su19/">CS 61A</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://inst.eecs.berkeley.edu/~cs61a/su19/weekly.html">Weekly Schedule</a></li>
            <li><a href="https://inst.eecs.berkeley.edu/~cs61a/su19/office-hours.html">Office Hours</a></li>
            <li><a href="https://inst.eecs.berkeley.edu/~cs61a/su19/staff.html">Staff</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="https://inst.eecs.berkeley.edu/~cs61a/su19/resources.html">Resources</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://inst.eecs.berkeley.edu/~cs61a/su19/articles/studying.html">Studying Guide</a></li>
            <li><a href="https://inst.eecs.berkeley.edu/~cs61a/su19/articles/debugging.html">Debugging Guide</a></li>
            <li><a href="https://inst.eecs.berkeley.edu/~cs61a/su19/articles/composition.html">Composition Guide</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="https://inst.eecs.berkeley.edu/~cs61a/su19/articles/about.html">Policies</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://inst.eecs.berkeley.edu/~cs61a/su19/articles/about.html#assignments">Assignments</a></li>
            <li><a href="https://inst.eecs.berkeley.edu/~cs61a/su19/articles/about.html#exams">Exams</a></li>
            <li><a href="https://inst.eecs.berkeley.edu/~cs61a/su19/articles/about.html#grading">Grading</a></li>
          </ul>
        </div>
      </div>
    </footer>

    


<script>
  $('.sidebar ul').addClass('nav nav-stacked noselect');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });
</script>


<script type="text/javascript" src="index_files/config.js"></script>
<script>
/*
This code is duplicated in lab-check-in.html. Doesn't work if we move it to a separate
file because of JQuery document ready concurrency issues.
*/
$(function() {
  var staging_domains = ['staging.cs61a.org', 'solutions.cs61a.org', 'localhost', '127.0.0.1'];
  var host = window.location.hostname;
  var staging = staging_domains.indexOf(host) != -1;
  staging = staging || (host.endsWith('.pullrequests.cs61a.org') && !host.startsWith('last-build.'));

  var after_due_date = new Date("08/03/2019") < new Date();
  var before_end_date = new Date() <= new Date(endDate);
  var release_solutions = (staging || after_due_date) && before_end_date;

  if (release_solutions) {
    $('.solutiontoggle').css('display', 'inline-block');
    $('.solutiontoggle').click(function() {
      var solution_id = $(this).attr('id');
      $('div.' + solution_id).slideToggle(600);
    });
  }
  $('.alwaystoggle').css('display', 'inline-block');
  $('.alwaystoggle').click(function() {
    var solution_id = $(this).attr('id');
    $('div.' + solution_id).slideToggle(600);
  });
});
</script>


  
</body></html>